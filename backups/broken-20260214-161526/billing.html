<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StaffManager êµ¬ë… ì‹œì‘ | ì•ˆì „í•œ í† ìŠ¤ í˜ì´ë¨¼ì¸  ê²°ì œ</title>
    <meta name="description" content="ê°„í¸í•œ ì¹´ë“œ ìë™ê²°ì œë¡œ StaffManager êµ¬ë… ì‹œì‘. ì–¸ì œë“  ì·¨ì†Œ ê°€ëŠ¥, ì²« 7ì¼ ì „ì•¡ í™˜ë¶ˆ ë³´ì¥">
    <meta property="og:title" content="StaffManager êµ¬ë… ì‹œì‘">
    <meta property="og:description" content="ì›” 49,900ì›ìœ¼ë¡œ AI ì„¸ë¬´ì‚¬ + íšŒê³„ì‚¬ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”">
    <meta property="og:url" content="https://staffmanager.io/billing.html">
    <script src="https://js.tosspayments.com/v1/payment"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: #f8f9fa;
            padding: 2rem;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 2rem;
            font-size: 2rem;
        }
        
        .plan-info {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }
        
        .plan-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 0.5rem;
        }
        
        .plan-price {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 1rem;
        }
        
        .plan-features {
            list-style: none;
            padding: 0;
        }
        
        .plan-features li {
            padding: 0.5rem 0;
            color: #666;
        }
        
        .plan-features li:before {
            content: "âœ“ ";
            color: #2ecc71;
            font-weight: bold;
            margin-right: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
        }
        
        input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .payment-methods {
            margin: 2rem 0;
        }
        
        .payment-method {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            cursor: pointer;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }
        
        .payment-method:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .payment-method.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .payment-method input[type="radio"] {
            margin-right: 1rem;
            width: auto;
        }
        
        .payment-method label {
            display: inline;
            cursor: pointer;
            font-weight: 500;
        }
        
        .card-form {
            display: none;
            margin-top: 1rem;
            padding: 1.5rem;
            background: white;
            border-radius: 8px;
        }
        
        .card-form.active {
            display: block;
        }
        
        .submit-button {
            width: 100%;
            padding: 1.2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .submit-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .notice {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
            display: none;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .card-input-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .card-input-row > div {
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>StaffManager êµ¬ë…</h1>
        
        <div class="plan-info" id="planInfo">
            <div class="plan-name" id="planName">PRO í”Œëœ</div>
            <div class="plan-price" id="planPrice">49,900ì› / ì›”</div>
            <ul class="plan-features">
                <li>ì§ì› 30ëª…ê¹Œì§€ ê´€ë¦¬</li>
                <li>AI ì„¸ë¬´/íšŒê³„ ìë™í™”</li>
                <li>POS ì—°ë™</li>
                <li>ì •ë¶€ ì§€ì›ê¸ˆ ì¶”ì²œ</li>
            </ul>
        </div>
        
        <form id="billingForm">
            <div class="form-group">
                <label for="customerName">ì´ë¦„ *</label>
                <input type="text" id="customerName" name="customerName" required placeholder="í™ê¸¸ë™">
            </div>
            
            <div class="form-group">
                <label for="customerEmail">ì´ë©”ì¼ *</label>
                <input type="email" id="customerEmail" name="customerEmail" required placeholder="example@company.com">
            </div>
            
            <div class="form-group">
                <label for="companyName">íšŒì‚¬ëª…</label>
                <input type="text" id="companyName" name="companyName" placeholder="ì£¼ì‹íšŒì‚¬ ì¸ìŠ¤í¼ë©">
            </div>
            
            <div class="payment-methods">
                <h3 style="margin-bottom: 1rem;">ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ</h3>
                
                <div class="payment-method selected" onclick="selectPaymentMethod('card')">
                    <input type="radio" id="card" name="paymentMethod" value="card" checked>
                    <label for="card">ğŸ’³ ì¹´ë“œ ìë™ê²°ì œ</label>
                </div>
                
                <div class="card-form active" id="cardForm">
                    <div class="form-group">
                        <label for="cardNumber">ì¹´ë“œ ë²ˆí˜¸ *</label>
                        <input type="text" id="cardNumber" inputmode="numeric" pattern="[0-9-]*" maxlength="19" placeholder="0000-0000-0000-0000" required autocomplete="cc-number">
                    </div>
                    
                    <div class="card-input-row">
                        <div class="form-group">
                            <label for="expiry">ìœ íš¨ê¸°ê°„ *</label>
                            <input type="text" id="expiry" inputmode="numeric" pattern="[0-9/]*" maxlength="5" placeholder="MM/YY" required autocomplete="cc-exp">
                        </div>
                        
                        <div class="form-group">
                            <label for="birth">ìƒë…„ì›”ì¼ 6ìë¦¬ *</label>
                            <input type="text" id="birth" inputmode="numeric" pattern="[0-9]*" maxlength="6" placeholder="YYMMDD" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="pwd2digit">ì¹´ë“œ ë¹„ë°€ë²ˆí˜¸ ì• 2ìë¦¬ *</label>
                        <input type="password" id="pwd2digit" inputmode="numeric" pattern="[0-9]*" maxlength="2" placeholder="â€¢â€¢" required>
                    </div>
                </div>
            </div>
            
            <div class="notice">
                âš ï¸ <strong>ìë™ê²°ì œ ì•ˆë‚´</strong><br>
                â€¢ ì²« ê²°ì œ í›„ ë§¤ì›” ìë™ìœ¼ë¡œ ê²°ì œë©ë‹ˆë‹¤.<br>
                â€¢ ì–¸ì œë“ ì§€ êµ¬ë…ì„ ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                â€¢ í™˜ë¶ˆ ì •ì±…ì€ <a href="/refund.html" target="_blank">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
            </div>
            
            <button type="submit" class="submit-button" id="submitButton">
                êµ¬ë… ì‹œì‘í•˜ê¸°
            </button>
        </form>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 1rem;">ê²°ì œ ì²˜ë¦¬ ì¤‘...</p>
        </div>
    </div>

    <script>
        // URLì—ì„œ í”Œëœ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const urlParams = new URLSearchParams(window.location.search);
        const selectedPlan = urlParams.get('plan') || 'pro';
        
        // í”Œëœ ì •ë³´
        const plans = {
            basic: {
                name: 'BASIC í”Œëœ',
                price: 29900,
                priceText: '29,900ì› / ì›”',
                features: [
                    'ì§ì› 10ëª…ê¹Œì§€ ê´€ë¦¬',
                    'AI ê³„ì •ê³¼ëª© ì¶”ì²œ',
                    'ì˜ìˆ˜ì¦ AI ë¶„ë¥˜',
                    'ì„¸ë¬´ ê²½ê³ '
                ]
            },
            pro: {
                name: 'PRO í”Œëœ',
                price: 49900,
                priceText: '49,900ì› / ì›”',
                features: [
                    'ì§ì› 30ëª…ê¹Œì§€ ê´€ë¦¬',
                    'AI ì„¸ë¬´/íšŒê³„ ìë™í™”',
                    'POS ì—°ë™',
                    'ì •ë¶€ ì§€ì›ê¸ˆ ì¶”ì²œ'
                ]
            },
            enterprise: {
                name: 'ENTERPRISE í”Œëœ',
                price: 99900,
                priceText: '99,900ì› / ì›”',
                features: [
                    'ì§ì› ë¬´ì œí•œ',
                    'ì „ë‹´ ë§¤ë‹ˆì €',
                    'ìš°ì„  ì§€ì›',
                    'API ì—°ë™'
                ]
            }
        };
        
        // ì„ íƒëœ í”Œëœ ì •ë³´ í‘œì‹œ
        const plan = plans[selectedPlan];
        document.getElementById('planName').textContent = plan.name;
        document.getElementById('planPrice').textContent = plan.priceText;
        
        const featuresList = document.querySelector('.plan-features');
        featuresList.innerHTML = plan.features.map(f => `<li>${f}</li>`).join('');
        
        // í† ìŠ¤ í˜ì´ë¨¼ì¸  ì´ˆê¸°í™”
        const clientKey = 'test_ck_Z61JOxRQVEBzXa0b2m7grW0X9bAq';
        const tossPayments = TossPayments(clientKey);
        
        // ì¹´ë“œ ë²ˆí˜¸ ìë™ í¬ë§·íŒ…
        document.getElementById('cardNumber').addEventListener('input', function(e) {
            // ìˆ«ìë§Œ ì¶”ì¶œ
            let value = e.target.value.replace(/[^\d]/g, '');
            
            // ìµœëŒ€ 16ìë¦¬ë¡œ ì œí•œ
            value = value.substring(0, 16);
            
            // 4ìë¦¬ë§ˆë‹¤ í•˜ì´í”ˆ ì¶”ê°€
            let formattedValue = '';
            for (let i = 0; i < value.length; i++) {
                if (i > 0 && i % 4 === 0) {
                    formattedValue += '-';
                }
                formattedValue += value[i];
            }
            
            e.target.value = formattedValue;
        });
        
        // ìœ íš¨ê¸°ê°„ ìë™ í¬ë§·íŒ…
        document.getElementById('expiry').addEventListener('input', function(e) {
            // ìˆ«ìë§Œ ì¶”ì¶œ
            let value = e.target.value.replace(/[^\d]/g, '');
            
            // ìµœëŒ€ 4ìë¦¬ë¡œ ì œí•œ
            value = value.substring(0, 4);
            
            // MM/YY í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…
            if (value.length >= 2) {
                e.target.value = value.slice(0, 2) + '/' + value.slice(2);
            } else {
                e.target.value = value;
            }
        });
        
        // ìƒë…„ì›”ì¼ ìˆ«ìë§Œ ì…ë ¥
        document.getElementById('birth').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^\d]/g, '');
            e.target.value = value.substring(0, 6);
        });
        
        // ë¹„ë°€ë²ˆí˜¸ ìˆ«ìë§Œ ì…ë ¥
        document.getElementById('pwd2digit').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^\d]/g, '');
            e.target.value = value.substring(0, 2);
        });
        
        // ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ
        function selectPaymentMethod(method) {
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            document.getElementById(method).checked = true;
        }
        
        // í¼ ì œì¶œ ì²˜ë¦¬
        document.getElementById('billingForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitButton = document.getElementById('submitButton');
            const loading = document.getElementById('loading');
            
            // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
            const customerName = document.getElementById('customerName').value;
            const customerEmail = document.getElementById('customerEmail').value;
            const companyName = document.getElementById('companyName').value;
            const cardNumber = document.getElementById('cardNumber').value.replace(/-/g, '');
            const expiry = document.getElementById('expiry').value.replace(/\//g, '');
            const birth = document.getElementById('birth').value;
            const pwd2digit = document.getElementById('pwd2digit').value;
            
            // ìœ íš¨ì„± ê²€ì‚¬
            if (!customerName || !customerEmail) {
                alert('ì´ë¦„ê³¼ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (cardNumber.length !== 16) {
                alert('ì¹´ë“œ ë²ˆí˜¸ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (expiry.length !== 4) {
                alert('ìœ íš¨ê¸°ê°„ì„ MM/YY í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (birth.length !== 6) {
                alert('ìƒë…„ì›”ì¼ 6ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (pwd2digit.length !== 2) {
                alert('ì¹´ë“œ ë¹„ë°€ë²ˆí˜¸ ì• 2ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // UI ì—…ë°ì´íŠ¸
            submitButton.disabled = true;
            submitButton.textContent = 'ì²˜ë¦¬ ì¤‘...';
            loading.style.display = 'block';
            
            try {
                // customerKey ìƒì„± (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ìƒì„±)
                const customerKey = 'customer_' + Date.now();
                
                // ë¹Œë§í‚¤ ë°œê¸‰ ìš”ì²­
                await tossPayments.requestBillingAuth('ì¹´ë“œ', {
                    customerKey: customerKey,
                    customerName: customerName,
                    customerEmail: customerEmail,
                    cardNumber: cardNumber,
                    cardExpirationYear: '20' + expiry.slice(2, 4),
                    cardExpirationMonth: expiry.slice(0, 2),
                    cardPassword: pwd2digit,
                    customerIdentityNumber: birth,
                    successUrl: window.location.origin + '/billing-success.html?plan=' + selectedPlan + '&customerKey=' + customerKey,
                    failUrl: window.location.origin + '/billing-fail.html',
                });
            } catch (error) {
                console.error('ë¹Œë§í‚¤ ë°œê¸‰ ì‹¤íŒ¨:', error);
                
                loading.style.display = 'none';
                alert('ê²°ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + (error.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
                
                submitButton.disabled = false;
                submitButton.textContent = 'ë‹¤ì‹œ ì‹œë„í•˜ê¸°';
            }
        });
    </script>
</body>
</html>
