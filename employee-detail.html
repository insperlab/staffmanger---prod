<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì§ì› ìƒì„¸ - StaffManager</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto',sans-serif;background:#f5f7fa;min-height:100vh}.navbar{background:#fff;box-shadow:0 2px 4px rgba(0,0,0,.1);padding:0 30px;height:70px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}.navbar-brand{display:flex;align-items:center;gap:12px;font-size:24px;font-weight:700;color:#667eea;text-decoration:none}.navbar-menu{display:flex;gap:30px;align-items:center}.navbar-menu a{text-decoration:none;color:#666;font-weight:500;transition:color .3s}.navbar-menu a:hover,.navbar-menu a.active{color:#667eea}.container{max-width:1200px;margin:0 auto;padding:30px}.breadcrumb{margin-bottom:20px;font-size:14px;color:#999}.breadcrumb a{color:#667eea;text-decoration:none}.profile-header{background:#fff;border-radius:12px;padding:30px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:24px;display:flex;justify-content:space-between;align-items:center}.profile-left{display:flex;align-items:center;gap:24px}.profile-avatar{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;font-size:32px;color:#fff;font-weight:700}.profile-name{font-size:28px;font-weight:700;color:#333;margin-bottom:4px}.profile-meta{font-size:14px;color:#999}.profile-meta span{margin-right:16px}.status-badge{display:inline-block;padding:4px 14px;border-radius:12px;font-size:13px;font-weight:600}.status-active{background:#d4edda;color:#155724}.status-on_leave{background:#fff3cd;color:#856404}.status-resigned{background:#f8d7da;color:#721c24}.profile-actions{display:flex;gap:10px}.btn{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;border:none;transition:all .3s;text-decoration:none;display:inline-flex;align-items:center;gap:6px}.btn-outline{background:#fff;color:#667eea;border:2px solid #667eea}.btn-outline:hover{background:#f5f7fa}.btn-danger{background:#fff;color:#e74c3c;border:2px solid #e74c3c}.btn-danger:hover{background:#fdf2f2}.tabs{background:#fff;border-radius:12px 12px 0 0;box-shadow:0 2px 8px rgba(0,0,0,.08);display:flex;border-bottom:2px solid #e0e0e0;overflow-x:auto}.tab{padding:16px 28px;font-size:15px;font-weight:500;color:#999;cursor:pointer;border-bottom:3px solid transparent;margin-bottom:-2px;white-space:nowrap;transition:all .2s}.tab:hover{color:#667eea}.tab.active{color:#667eea;border-bottom-color:#667eea;font-weight:600}.tab-content{background:#fff;border-radius:0 0 12px 12px;padding:30px;box-shadow:0 2px 8px rgba(0,0,0,.08);display:none}.tab-content.active{display:block}.info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px}.info-group{margin-bottom:8px}.info-label{font-size:13px;color:#999;margin-bottom:4px}.info-value{font-size:15px;color:#333;font-weight:500}.info-value.highlight{color:#667eea;font-weight:700;font-size:18px}.section-divider{border:none;border-top:1px solid #eee;margin:24px 0}.section-subtitle{font-size:17px;font-weight:600;color:#333;margin-bottom:16px;padding-left:12px;border-left:4px solid #667eea}.contract-list{list-style:none}.contract-item{padding:16px;border:1px solid #eee;border-radius:8px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center}.contract-item:hover{background:#f8f9fa}.contract-type{font-weight:600;color:#333}.contract-date{font-size:13px;color:#999}.contract-status{font-size:12px;padding:3px 10px;border-radius:10px;font-weight:600}.contract-signed{background:#d4edda;color:#155724}.contract-pending{background:#fff3cd;color:#856404}.contract-sent{background:#d1ecf1;color:#0c5460}.loading{text-align:center;padding:80px 20px}.spinner{border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;margin:0 auto 20px}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media(max-width:768px){.container{padding:15px}.profile-header{flex-direction:column;gap:20px;align-items:flex-start}.info-grid{grid-template-columns:1fr}.tab{padding:12px 16px;font-size:13px}}
</style>
</head>
<body>
<nav class="navbar"><a href="/dashboard.html" class="navbar-brand"><span>ğŸ¯</span><span>StaffManager</span></a><div class="navbar-menu"><a href="/dashboard.html">ëŒ€ì‹œë³´ë“œ</a><a href="/employees.html" class="active">ì§ì› ê´€ë¦¬</a><a href="/attendances.html">ì¶œí‡´ê·¼ ê´€ë¦¬</a><a href="/calendar.html">íœ´ê°€ ê´€ë¦¬</a><a href="/salary.html">ê¸‰ì—¬ ê´€ë¦¬</a><a href="/settings.html">ì„¤ì •</a><a href="/contracts.html">ê³„ì•½ ê´€ë¦¬</a></div></nav>
<div class="container">
<div class="breadcrumb"><a href="/employees.html">ì§ì› ê´€ë¦¬</a> &gt; <span id="breadcrumbName">ì§ì› ìƒì„¸</span></div>
<div id="loadingState" class="loading"><div class="spinner"></div><p style="color:#999">ì§ì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p></div>
<div id="mainContent" style="display:none">
<div class="profile-header"><div class="profile-left"><div class="profile-avatar" id="avatar"></div><div><div class="profile-name" id="empName"></div><div class="profile-meta"><span id="empDept"></span><span id="empPosition"></span><span id="empNumber"></span></div><div style="margin-top:8px"><span class="status-badge" id="empStatus"></span></div></div></div><div class="profile-actions"><a href="/contracts.html" class="btn btn-outline">ğŸ“„ ê³„ì•½ì„œ ë°œì†¡</a><button class="btn btn-danger" onclick="confirmStatusChange()">ìƒíƒœ ë³€ê²½</button></div></div>
<div class="tabs"><div class="tab active" data-tab="basic" onclick="switchTab('basic')">ê¸°ë³¸ ì •ë³´</div><div class="tab" data-tab="work" onclick="switchTab('work')">ê·¼ë¬´ ì •ë³´</div><div class="tab" data-tab="salary" onclick="switchTab('salary')">ê¸‰ì—¬ ì •ë³´</div><div class="tab" data-tab="contract" onclick="switchTab('contract')">ê³„ì•½ ì •ë³´</div></div>
<div class="tab-content active" id="tab-basic"><div class="section-subtitle">ì¸ì  ì‚¬í•­</div><div class="info-grid"><div class="info-group"><div class="info-label">ì´ë¦„</div><div class="info-value" id="infoName">-</div></div><div class="info-group"><div class="info-label">ì´ë©”ì¼</div><div class="info-value" id="infoEmail">-</div></div><div class="info-group"><div class="info-label">ì „í™”ë²ˆí˜¸</div><div class="info-value" id="infoPhone">-</div></div><div class="info-group"><div class="info-label">ìƒë…„ì›”ì¼</div><div class="info-value" id="infoBirth">-</div></div><div class="info-group"><div class="info-label">ì£¼ì†Œ</div><div class="info-value" id="infoAddress">-</div></div><div class="info-group"><div class="info-label">ì‚¬ì›ë²ˆí˜¸</div><div class="info-value" id="infoEmpNumber">-</div></div></div><hr class="section-divider"><div class="section-subtitle">ì¡°ì§ ì •ë³´</div><div class="info-grid"><div class="info-group"><div class="info-label">ë¶€ì„œ</div><div class="info-value" id="infoDept">-</div></div><div class="info-group"><div class="info-label">ì§ê¸‰</div><div class="info-value" id="infoPosition">-</div></div><div class="info-group"><div class="info-label">ì§ì±…</div><div class="info-value" id="infoJobTitle">-</div></div><div class="info-group"><div class="info-label">ì…ì‚¬ì¼</div><div class="info-value" id="infoHireDate">-</div></div><div class="info-group"><div class="info-label">ì¬ì§ ê¸°ê°„</div><div class="info-value highlight" id="infoTenure">-</div></div><div class="info-group"><div class="info-label">ë“±ë¡ì¼</div><div class="info-value" id="infoCreated">-</div></div></div></div>
<div class="tab-content" id="tab-work"><div class="section-subtitle">ê·¼ë¬´ ì¡°ê±´</div><div class="info-grid"><div class="info-group"><div class="info-label">ê·¼ë¬´ í˜•íƒœ</div><div class="info-value" id="infoWorkType">-</div></div><div class="info-group"><div class="info-label">ê·¼ë¬´ ì‹œê°„</div><div class="info-value" id="infoWorkHours">-</div></div><div class="info-group"><div class="info-label">íœ´ê²Œ ì‹œê°„</div><div class="info-value" id="infoBreakTime">-</div></div><div class="info-group"><div class="info-label">ì£¼íœ´ì¼</div><div class="info-value" id="infoWeeklyHoliday">-</div></div><div class="info-group"><div class="info-label">ê·¼ë¬´ì§€</div><div class="info-value" id="infoWorkLocation">-</div></div><div class="info-group"><div class="info-label">ìˆ˜ìŠµ ê¸°ê°„</div><div class="info-value" id="infoProbation">-</div></div></div><hr class="section-divider"><div class="section-subtitle">ê³„ì•½ ê¸°ê°„</div><div class="info-grid"><div class="info-group"><div class="info-label">ê³„ì•½ ì‹œì‘ì¼</div><div class="info-value" id="infoContractStart">-</div></div><div class="info-group"><div class="info-label">ê³„ì•½ ì¢…ë£Œì¼</div><div class="info-value" id="infoContractEnd">-</div></div></div></div>
<div class="tab-content" id="tab-salary"><div class="section-subtitle">ê¸‰ì—¬ ì •ë³´</div><div class="info-grid"><div class="info-group"><div class="info-label">ê¸‰ì—¬ ìœ í˜•</div><div class="info-value" id="infoSalaryType">-</div></div><div class="info-group"><div class="info-label">ê¸°ë³¸ê¸‰</div><div class="info-value highlight" id="infoBaseSalary">-</div></div><div class="info-group"><div class="info-label">ì›”ê¸‰</div><div class="info-value highlight" id="infoMonthlyWage">-</div></div><div class="info-group"><div class="info-label">ì—°ë´‰</div><div class="info-value highlight" id="infoAnnualSalary">-</div></div></div><hr class="section-divider"><div class="section-subtitle">ê³„ì¢Œ ì •ë³´</div><div class="info-grid"><div class="info-group"><div class="info-label">ì€í–‰ëª…</div><div class="info-value" id="infoBankName">-</div></div><div class="info-group"><div class="info-label">ê³„ì¢Œë²ˆí˜¸</div><div class="info-value" id="infoAccountNumber">-</div></div></div></div>
<div class="tab-content" id="tab-contract"><div class="section-subtitle">ì „ìê³„ì•½ ì´ë ¥</div><ul class="contract-list" id="contractList"><li style="text-align:center;color:#999;padding:40px">ê³„ì•½ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤</li></ul></div>
</div></div>
<script>
var authToken=null,employeeData=null;window.addEventListener('DOMContentLoaded',async function(){authToken=localStorage.getItem('authToken');if(!authToken){window.location.href='/login.html';return}var p=new URLSearchParams(window.location.search);var id=p.get('id');if(!id){window.location.href='/employees.html';return}await loadEmployeeDetail(id)});async function loadEmployeeDetail(id){try{var r=await fetch('/.netlify/functions/employee-detail?id='+id,{headers:{'Authorization':'Bearer '+authToken}});var data=await r.json();if(!data.success)throw new Error(data.error);employeeData=data.data;renderDetail();document.getElementById('loadingState').style.display='none';document.getElementById('mainContent').style.display='block'}catch(e){console.error(e);alert('ì§ì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: '+e.message);window.location.href='/employees.html'}}
function renderDetail(){var d=employeeData,name=d.name||'ì´ë¦„ ì—†ìŒ';document.title=name+' - StaffManager';document.getElementById('breadcrumbName').textContent=name;document.getElementById('avatar').textContent=name.charAt(0);document.getElementById('empName').textContent=name;document.getElementById('empDept').textContent=d.department?'ğŸ¢ '+d.department:'';document.getElementById('empPosition').textContent=d.position?'ğŸ“‹ '+d.position:'';document.getElementById('empNumber').textContent=d.employeeNumber?'#'+d.employeeNumber:'';var se=document.getElementById('empStatus');var sm={active:['ì¬ì§ ì¤‘','status-active'],on_leave:['íœ´ì§','status-on_leave'],resigned:['í‡´ì‚¬','status-resigned']};var st=sm[d.status]||[d.status,'status-active'];se.textContent=st[0];se.className='status-badge '+st[1];setText('infoName',name);setText('infoEmail',d.email);setText('infoPhone',d.phone);setText('infoBirth',fmtDate(d.birthDate));setText('infoAddress',d.address);setText('infoEmpNumber',d.employeeNumber);setText('infoDept',d.department);setText('infoPosition',d.position);setText('infoJobTitle',d.jobTitle);setText('infoHireDate',fmtDate(d.hireDate));setText('infoCreated',fmtDate(d.createdAt));if(d.hireDate){var h=new Date(d.hireDate),n=new Date(),df=n-h;var y=Math.floor(df/(365.25*864e5)),m=Math.floor((df%(365.25*864e5))/(30.44*864e5));var t='';if(y>0)t+=y+'ë…„ ';t+=m+'ê°œì›”';setText('infoTenure',t)}var wm={full_time:'ì •ê·œì§',part_time:'íŒŒíŠ¸íƒ€ì„',contract:'ê³„ì•½ì§',daily:'ì¼ìš©ì§'};setText('infoWorkType',wm[d.workType]||d.workType);if(d.workStartTime&&d.workEndTime)setText('infoWorkHours',d.workStartTime+' ~ '+d.workEndTime);setText('infoBreakTime',d.breakTimeMinutes?d.breakTimeMinutes+'ë¶„':null);setText('infoWeeklyHoliday',d.weeklyHoliday);setText('infoWorkLocation',d.workLocation);setText('infoProbation',d.probationMonths?d.probationMonths+'ê°œì›”':'ì—†ìŒ');setText('infoContractStart',fmtDate(d.contractStartDate));setText('infoContractEnd',fmtDate(d.contractEndDate)||'ë¬´ê¸°í•œ');var stm={monthly:'ì›”ê¸‰ì œ',hourly:'ì‹œê¸‰ì œ',daily:'ì¼ê¸‰ì œ',annual:'ì—°ë´‰ì œ'};setText('infoSalaryType',stm[d.salaryType]||d.salaryType);setText('infoBaseSalary',fmtCur(d.baseSalary));setText('infoMonthlyWage',fmtCur(d.monthlyWage));setText('infoAnnualSalary',fmtCur(d.annualSalary));setText('infoBankName',d.bankName);setText('infoAccountNumber',d.accountNumber?maskAcc(d.accountNumber):null);renderContracts(d.contracts||[])}
function renderContracts(cs){var l=document.getElementById('contractList');if(!cs.length)return;var tm={standard_labor:'í‘œì¤€ ê·¼ë¡œê³„ì•½ì„œ',part_time:'ë‹¨ì‹œê°„ ê·¼ë¡œê³„ì•½ì„œ',daily:'ì¼ìš© ê·¼ë¡œê³„ì•½ì„œ'};var sm={completed:['ì„œëª… ì™„ë£Œ','contract-signed'],sent:['ë°œì†¡ë¨','contract-sent'],pending:['ëŒ€ê¸° ì¤‘','contract-pending'],viewed:['ì—´ëŒí•¨','contract-sent']};l.innerHTML=cs.map(function(c){var s=sm[c.status]||[c.status,'contract-pending'];return'<li class="contract-item"><div><div class="contract-type">'+(tm[c.type]||c.type||'ê·¼ë¡œê³„ì•½ì„œ')+'</div><div class="contract-date">ìƒì„±: '+fmtDate(c.createdAt)+(c.signedAt?' Â· ì„œëª…: '+fmtDate(c.signedAt):'')+'</div></div><span class="contract-status '+s[1]+'">'+s[0]+'</span></li>'}).join('')}
function switchTab(t){document.querySelectorAll('.tab').forEach(function(e){e.classList.remove('active')});document.querySelectorAll('.tab-content').forEach(function(e){e.classList.remove('active')});document.querySelector('.tab[data-tab="'+t+'"]').classList.add('active');document.getElementById('tab-'+t).classList.add('active')}
function setText(id,v){var e=document.getElementById(id);if(e)e.textContent=v||'-'}
function fmtDate(s){if(!s)return null;var d=new Date(s);if(isNaN(d))return s;return d.toLocaleDateString('ko-KR',{year:'numeric',month:'2-digit',day:'2-digit'})}
function fmtCur(a){if(!a&&a!==0)return null;return' A9'+Number(a).toLocaleString('ko-KR')}
function maskAcc(a){if(!a||a.length<5)return a;return a.slice(0,3)+'****'+a.slice(-3)}
function confirmStatusChange(){alert('ìƒíƒœ ë³€ê²½ ê¸°ëŠ¥ì€ ë‹¤ìŒ ì—…ë°ì´íŠ¸ì—ì„œ ì œê³µí•©ë‹ˆë‹¤.')}
</script>
</body>
</html>