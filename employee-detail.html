<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì§ì› ìƒì„¸ - StaffManager</title>
<style>
/* ===== ê¸°ë³¸ ë¦¬ì…‹ & ë°”ë”” ===== */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto',sans-serif;background:#f5f7fa;min-height:100vh}

/* ===== ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” ===== */
.navbar{background:#fff;box-shadow:0 2px 4px rgba(0,0,0,.1);padding:0 30px;height:70px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}
.navbar-brand{display:flex;align-items:center;gap:12px;font-size:24px;font-weight:700;color:#667eea;text-decoration:none}
.navbar-menu{display:flex;gap:30px;align-items:center}
.navbar-menu a{text-decoration:none;color:#666;font-weight:500;transition:color .3s}
.navbar-menu a:hover,.navbar-menu a.active{color:#667eea}

/* ===== í˜ì´ì§€ ì»¨í…Œì´ë„ˆ ===== */
.container{max-width:1200px;margin:0 auto;padding:30px}
.breadcrumb{margin-bottom:20px;font-size:14px;color:#999}
.breadcrumb a{color:#667eea;text-decoration:none}

/* ===== í”„ë¡œí•„ í—¤ë” ì¹´ë“œ ===== */
.profile-header{background:#fff;border-radius:12px;padding:30px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:24px;display:flex;justify-content:space-between;align-items:center}
.profile-left{display:flex;align-items:center;gap:24px}
.profile-avatar{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;font-size:32px;color:#fff;font-weight:700}
.profile-name{font-size:28px;font-weight:700;color:#333;margin-bottom:4px}
.profile-meta{font-size:14px;color:#999}
.profile-meta span{margin-right:16px}

/* ===== ì¬ì§ ìƒíƒœ ë±ƒì§€ ===== */
.status-badge{display:inline-block;padding:4px 14px;border-radius:12px;font-size:13px;font-weight:600}
.status-active{background:#d4edda;color:#155724}
.status-on_leave{background:#fff3cd;color:#856404}
.status-resigned{background:#f8d7da;color:#721c24}

/* ===== ë²„íŠ¼ ê³µí†µ ìŠ¤íƒ€ì¼ ===== */
.profile-actions{display:flex;gap:10px}
.btn{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;border:none;transition:all .3s;text-decoration:none;display:inline-flex;align-items:center;gap:6px}
.btn-primary{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}
.btn-primary:hover{opacity:.9}
.btn-outline{background:#fff;color:#667eea;border:2px solid #667eea}
.btn-outline:hover{background:#f5f7fa}

/* ===== íƒ­ ë©”ë‰´ ===== */
.tabs{background:#fff;border-radius:12px 12px 0 0;box-shadow:0 2px 8px rgba(0,0,0,.08);display:flex;border-bottom:2px solid #e0e0e0;overflow-x:auto}
.tab{padding:16px 28px;font-size:15px;font-weight:500;color:#999;cursor:pointer;border-bottom:3px solid transparent;margin-bottom:-2px;white-space:nowrap;transition:all .2s}
.tab:hover{color:#667eea}
.tab.active{color:#667eea;border-bottom-color:#667eea;font-weight:600}

/* ===== íƒ­ ì½˜í…ì¸  ì˜ì—­ ===== */
.tab-content{background:#fff;border-radius:0 0 12px 12px;padding:30px;box-shadow:0 2px 8px rgba(0,0,0,.08);display:none}
.tab-content.active{display:block}

/* ===== ì •ë³´ ê·¸ë¦¬ë“œ & í•­ëª© ===== */
.info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px}
.info-group{margin-bottom:8px}
.info-label{font-size:13px;color:#999;margin-bottom:4px}
.info-value{font-size:15px;color:#333;font-weight:500}
.info-value.highlight{color:#667eea;font-weight:700;font-size:18px}

/* ===== ì„¹ì…˜ êµ¬ë¶„ ===== */
.section-divider{border:none;border-top:1px solid #eee;margin:24px 0}
.section-subtitle{font-size:17px;font-weight:600;color:#333;margin-bottom:16px;padding-left:12px;border-left:4px solid #667eea}

/* ===== ê³„ì•½ ëª©ë¡ ===== */
.contract-list{list-style:none}
.contract-item{padding:16px;border:1px solid #eee;border-radius:8px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center}
.contract-item:hover{background:#f8f9fa}
.contract-type{font-weight:600;color:#333}
.contract-date{font-size:13px;color:#999}
.contract-status{font-size:12px;padding:3px 10px;border-radius:10px;font-weight:600}
.contract-signed{background:#d4edda;color:#155724}
.contract-pending{background:#fff3cd;color:#856404}
.contract-sent{background:#d1ecf1;color:#0c5460}

/* ===== ë¡œë”© ìŠ¤í”¼ë„ˆ ===== */
.loading{text-align:center;padding:80px 20px}
.spinner{border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;margin:0 auto 20px}
@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}

/* ===== ìˆ˜ì • ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ ===== */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1000;justify-content:center;align-items:center;padding:20px}
.modal-overlay.show{display:flex}

/* ===== ëª¨ë‹¬ ë³¸ì²´ ===== */
.modal{background:#fff;border-radius:16px;width:100%;max-width:580px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.2)}
.modal-header{padding:24px 28px 0;display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.modal-title{font-size:20px;font-weight:700;color:#333}
.modal-close{background:none;border:none;font-size:24px;color:#999;cursor:pointer;padding:4px;line-height:1}
.modal-close:hover{color:#333}
.modal-body{padding:0 28px 28px}

/* ===== ëª¨ë‹¬ ì„¹ì…˜ íƒ€ì´í‹€ ===== */
.form-section{margin-bottom:24px}
.form-section-title{font-size:13px;font-weight:700;color:#667eea;text-transform:uppercase;letter-spacing:.5px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #eee}

/* ===== í¼ ë ˆì´ì•„ì›ƒ (2ì—´ / 1ì—´) ===== */
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:14px}
.form-row.full{grid-template-columns:1fr}

/* ===== í¼ ì…ë ¥ í•„ë“œ ===== */
.form-group label{display:block;font-size:13px;font-weight:600;color:#555;margin-bottom:6px}
.form-group input,.form-group select{width:100%;padding:10px 14px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;color:#333;background:#fff;transition:border-color .2s}
.form-group input:focus,.form-group select:focus{outline:none;border-color:#667eea}

/* ===== ëª¨ë‹¬ í•˜ë‹¨ ë²„íŠ¼ ===== */
.modal-footer{padding:20px 28px;border-top:1px solid #eee;display:flex;gap:10px;justify-content:flex-end}
.btn-save{padding:12px 28px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer}
.btn-save:disabled{opacity:.5;cursor:not-allowed}
.btn-cancel{padding:12px 24px;background:#f5f7fa;color:#666;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer}

/* ===== ì €ì¥ ê²°ê³¼ ë©”ì‹œì§€ ===== */
.save-result{margin:0 28px 16px;padding:12px 16px;border-radius:8px;font-size:14px;display:none}
.save-result.success{background:#d4edda;color:#155724;display:block}
.save-result.error{background:#f8d7da;color:#721c24;display:block}

/* ===== ëª¨ë°”ì¼ ë°˜ì‘í˜• ===== */
@media(max-width:768px){
  .container{padding:15px}
  .profile-header{flex-direction:column;gap:20px;align-items:flex-start}
  .info-grid{grid-template-columns:1fr}
  .tab{padding:12px 16px;font-size:13px}
  .form-row{grid-template-columns:1fr}
}
</style>
</head>
<body>

<!-- ===== ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ===== -->
<nav class="navbar">
  <a href="/dashboard.html" class="navbar-brand"><span>ğŸ¯</span><span>StaffManager</span></a>
  <div class="navbar-menu">
    <a href="/dashboard.html">ëŒ€ì‹œë³´ë“œ</a>
    <a href="/employees.html" class="active">ì§ì› ê´€ë¦¬</a>
    <a href="/attendances.html">ì¶œí‡´ê·¼ ê´€ë¦¬</a>
    <a href="/calendar.html">íœ´ê°€ ê´€ë¦¬</a>
    <a href="/salary.html">ê¸‰ì—¬ ê´€ë¦¬</a>
    <a href="/contracts.html">ê³„ì•½ ê´€ë¦¬</a>
    <a href="/settings.html">ì„¤ì •</a>
  </div>
</nav>

<div class="container">
  <!-- í˜ì´ì§€ ê²½ë¡œ í‘œì‹œ (ì§ì› ê´€ë¦¬ > í™ê¸¸ë™) -->
  <div class="breadcrumb"><a href="/employees.html">ì§ì› ê´€ë¦¬</a> &gt; <span id="breadcrumbName">ì§ì› ìƒì„¸</span></div>

  <!-- ë¡œë”© ì¤‘ (API ì‘ë‹µ ì „) -->
  <div id="loadingState" class="loading"><div class="spinner"></div><p style="color:#999">ì§ì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p></div>

  <!-- ë©”ì¸ ì½˜í…ì¸  (API ì‘ë‹µ í›„ í‘œì‹œ) -->
  <div id="mainContent" style="display:none">

    <!-- ===== í”„ë¡œí•„ í—¤ë” ===== -->
    <div class="profile-header">
      <div class="profile-left">
        <div class="profile-avatar" id="avatar"></div>  <!-- ì´ë¦„ ì²« ê¸€ì -->
        <div>
          <div class="profile-name" id="empName"></div>
          <div class="profile-meta">
            <span id="empDept"></span>       <!-- ğŸ¢ ë¶€ì„œ -->
            <span id="empPosition"></span>   <!-- ğŸ“‹ ì§ê¸‰ -->
            <span id="empBiz"></span>        <!-- ğŸ“ ì†Œì† ì‚¬ì—…ì¥ -->
          </div>
          <div style="margin-top:8px"><span class="status-badge" id="empStatus"></span></div>
        </div>
      </div>
      <div class="profile-actions">
        <a href="/contracts.html" class="btn btn-outline">ğŸ“„ ê³„ì•½ì„œ ë°œì†¡</a>
        <button class="btn btn-primary" onclick="openEditModal()">âœï¸ ì •ë³´ ìˆ˜ì •</button>
      </div>
    </div>

    <!-- ===== íƒ­ ë©”ë‰´ ===== -->
    <div class="tabs">
      <div class="tab active" data-tab="basic"    onclick="switchTab('basic')">ê¸°ë³¸ ì •ë³´</div>
      <div class="tab"        data-tab="work"     onclick="switchTab('work')">ê·¼ë¬´ ì •ë³´</div>
      <div class="tab"        data-tab="salary"   onclick="switchTab('salary')">ê¸‰ì—¬ ì •ë³´</div>
      <div class="tab"        data-tab="contract" onclick="switchTab('contract')">ê³„ì•½ ì •ë³´</div>
    </div>

    <!-- ===== íƒ­1: ê¸°ë³¸ ì •ë³´ ===== -->
    <div class="tab-content active" id="tab-basic">
      <div class="section-subtitle">ì¸ì  ì‚¬í•­</div>
      <div class="info-grid">
        <div class="info-group"><div class="info-label">ì´ë¦„</div><div class="info-value" id="infoName">-</div></div>
        <div class="info-group"><div class="info-label">ì´ë©”ì¼</div><div class="info-value" id="infoEmail">-</div></div>
        <div class="info-group"><div class="info-label">ì „í™”ë²ˆí˜¸</div><div class="info-value" id="infoPhone">-</div></div>
        <div class="info-group"><div class="info-label">ìƒë…„ì›”ì¼</div><div class="info-value" id="infoBirth">-</div></div>
        <div class="info-group"><div class="info-label">ì£¼ì†Œ</div><div class="info-value" id="infoAddress">-</div></div>
        <div class="info-group"><div class="info-label">ì‚¬ì›ë²ˆí˜¸</div><div class="info-value" id="infoEmpNumber">-</div></div>
      </div>
      <hr class="section-divider">
      <div class="section-subtitle">ì¡°ì§ ì •ë³´</div>
      <div class="info-grid">
        <div class="info-group"><div class="info-label">ì†Œì† ì‚¬ì—…ì¥</div><div class="info-value" id="infoBusiness">-</div></div>
        <div class="info-group"><div class="info-label">ë¶€ì„œ</div><div class="info-value" id="infoDept">-</div></div>
        <div class="info-group"><div class="info-label">ì§ê¸‰</div><div class="info-value" id="infoPosition">-</div></div>
        <div class="info-group"><div class="info-label">ì§ì±…</div><div class="info-value" id="infoJobTitle">-</div></div>
        <div class="info-group"><div class="info-label">ì…ì‚¬ì¼</div><div class="info-value" id="infoHireDate">-</div></div>
        <div class="info-group"><div class="info-label">ì¬ì§ ê¸°ê°„</div><div class="info-value highlight" id="infoTenure">-</div></div>
        <div class="info-group"><div class="info-label">ë“±ë¡ì¼</div><div class="info-value" id="infoCreated">-</div></div>
      </div>
    </div>

    <!-- ===== íƒ­2: ê·¼ë¬´ ì •ë³´ ===== -->
    <div class="tab-content" id="tab-work">
      <div class="section-subtitle">ê·¼ë¬´ ì¡°ê±´</div>
      <div class="info-grid">
        <!-- infoWorkType: full_time/part_time/contract/daily â†’ í•œê¸€ ë³€í™˜ í‘œì‹œ -->
        <div class="info-group"><div class="info-label">ê·¼ë¬´ í˜•íƒœ</div><div class="info-value" id="infoWorkType">-</div></div>
        <!-- infoWorkHours: workStartTime ~ workEndTime í•©ì³ì„œ í‘œì‹œ -->
        <div class="info-group"><div class="info-label">ê·¼ë¬´ ì‹œê°„</div><div class="info-value" id="infoWorkHours">-</div></div>
        <!-- infoBreakTime: breakTimeMinutes + "ë¶„" -->
        <div class="info-group"><div class="info-label">íœ´ê²Œ ì‹œê°„</div><div class="info-value" id="infoBreakTime">-</div></div>
        <div class="info-group"><div class="info-label">ì£¼íœ´ì¼</div><div class="info-value" id="infoWeeklyHoliday">-</div></div>
        <!-- infoProbation: probationMonths + "ê°œì›”" -->
        <div class="info-group"><div class="info-label">ìˆ˜ìŠµ ê¸°ê°„</div><div class="info-value" id="infoProbation">-</div></div>
      </div>
      <hr class="section-divider">
      <div class="section-subtitle">ê³„ì•½ ê¸°ê°„</div>
      <div class="info-grid">
        <div class="info-group"><div class="info-label">ê³„ì•½ ì‹œì‘ì¼</div><div class="info-value" id="infoContractStart">-</div></div>
        <div class="info-group"><div class="info-label">ê³„ì•½ ì¢…ë£Œì¼</div><div class="info-value" id="infoContractEnd">-</div></div>
      </div>
    </div>

    <!-- ===== íƒ­3: ê¸‰ì—¬ ì •ë³´ ===== -->
    <div class="tab-content" id="tab-salary">
      <div class="section-subtitle">ê¸‰ì—¬ ì •ë³´</div>
      <div class="info-grid">
        <div class="info-group"><div class="info-label">ê¸‰ì—¬ ìœ í˜•</div><div class="info-value" id="infoSalaryType">-</div></div>
        <!-- ê¸°ë³¸ê¸‰: ì‹œê¸‰ì œ(hourly) / ì¼ê¸‰ì œ(daily) ì¼ ë•Œë§Œ í‘œì‹œ -->
        <div class="info-group" id="rowBaseSalary"><div class="info-label">ê¸°ë³¸ ì‹œê¸‰/ì¼ê¸‰</div><div class="info-value highlight" id="infoBaseSalary">-</div></div>
        <!-- ì›”ê¸‰: ì›”ê¸‰ì œ(monthly) ì¼ ë•Œë§Œ í‘œì‹œ -->
        <div class="info-group" id="rowMonthlyWage"><div class="info-label">ì›”ê¸‰</div><div class="info-value highlight" id="infoMonthlyWage">-</div></div>
        <!-- ì—°ë´‰: ì—°ë´‰ì œ(annual) ì¼ ë•Œë§Œ í‘œì‹œ -->
        <div class="info-group" id="rowAnnualSalary"><div class="info-label">ì—°ë´‰</div><div class="info-value highlight" id="infoAnnualSalary">-</div></div>
      </div>
      <hr class="section-divider">
      <div class="section-subtitle">ê³„ì¢Œ ì •ë³´</div>
      <div class="info-grid">
        <div class="info-group"><div class="info-label">ì€í–‰ëª…</div><div class="info-value" id="infoBankName">-</div></div>
        <!-- ê³„ì¢Œë²ˆí˜¸ëŠ” ì•3ìë¦¬ + **** + ë’¤3ìë¦¬ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ -->
        <div class="info-group"><div class="info-label">ê³„ì¢Œë²ˆí˜¸</div><div class="info-value" id="infoAccountNumber">-</div></div>
      </div>
    </div>

    <!-- ===== íƒ­4: ê³„ì•½ ì •ë³´ ===== -->
    <div class="tab-content" id="tab-contract">
      <div class="section-subtitle">ì „ìê³„ì•½ ì´ë ¥</div>
      <!-- renderContracts() í•¨ìˆ˜ê°€ ì´ ì•ˆì„ ì±„ì›€ -->
      <ul class="contract-list" id="contractList">
        <li style="text-align:center;color:#999;padding:40px">ê³„ì•½ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤</li>
      </ul>
    </div>

  </div><!-- /mainContent -->
</div><!-- /container -->


<!-- ================================================================ -->
<!-- ===== í†µí•© ì •ë³´ ìˆ˜ì • ëª¨ë‹¬ (âœï¸ ì •ë³´ ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì‹œ í‘œì‹œ) ===== -->
<!-- ================================================================ -->
<div class="modal-overlay" id="editModal" onclick="closeModalOnBg(event)">
  <div class="modal">

    <!-- ëª¨ë‹¬ í—¤ë” -->
    <div class="modal-header">
      <div class="modal-title">âœï¸ ì§ì› ì •ë³´ ìˆ˜ì •</div>
      <button class="modal-close" onclick="closeEditModal()">âœ•</button>
    </div>

    <div class="modal-body">

      <!-- ===== [ëª¨ë‹¬ ì„¹ì…˜1] ì¡°ì§ ë°°ì¹˜ ===== -->
      <!-- ì‚¬ì—…ì¥ ì†Œì† / ì¬ì§ ìƒíƒœ / ë¶€ì„œ / ì§ê¸‰ / ì§ì±… / ì…ì‚¬ì¼ -->
      <div class="form-section">
        <div class="form-section-title">ì¡°ì§ ë°°ì¹˜</div>
        <div class="form-row">
          <div class="form-group">
            <label>ì†Œì† ì‚¬ì—…ì¥</label>
            <!-- loadBusinessList()ê°€ APIë¡œ ê°€ì ¸ì˜¨ ì‚¬ì—…ì¥ ëª©ë¡ì„ ë™ì  ì¶”ê°€ -->
            <select id="editBusiness">
              <option value="">ë¯¸ë°°ì •</option>
            </select>
          </div>
          <div class="form-group">
            <label>ì¬ì§ ìƒíƒœ</label>
            <select id="editStatus">
              <option value="active">ì¬ì§ì¤‘</option>
              <option value="on_leave">íœ´ì§</option>
              <option value="resigned">í‡´ì‚¬</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>ë¶€ì„œ</label><input type="text" id="editDept" placeholder="ì˜ˆ: í™€, ì£¼ë°©, ì¹´ìš´í„°"></div>
          <div class="form-group"><label>ì§ê¸‰</label><input type="text" id="editPosition" placeholder="ì˜ˆ: ì‚¬ì›, ì£¼ì„, ë§¤ë‹ˆì €"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>ì§ì±…</label><input type="text" id="editJobTitle" placeholder="ì˜ˆ: í™€ ë§¤ë‹ˆì €, ì£¼ë°©ì¥"></div>
          <div class="form-group"><label>ì…ì‚¬ì¼</label><input type="date" id="editHireDate"></div>
        </div>
      </div>

      <!-- ===== [ëª¨ë‹¬ ì„¹ì…˜2] ê·¼ë¬´ ì¡°ê±´ ===== -->
      <!-- â˜…â˜…â˜… ì´ ì„¹ì…˜ì´ ì´ë²ˆ ìˆ˜ì •ì—ì„œ ìƒˆë¡œ ì¶”ê°€ëœ ë¶€ë¶„ â˜…â˜…â˜… -->
      <!-- employees.work_type / work_location / work_start_time / work_end_time / break_time_minutes / probation_months -->
      <div class="form-section">
        <div class="form-section-title">ê·¼ë¬´ ì¡°ê±´</div>
        <div class="form-row">
          <div class="form-group">
            <label>ê·¼ë¬´ í˜•íƒœ</label>
            <!-- employees.work_type ì»¬ëŸ¼ (full_time/part_time/contract/daily) -->
            <select id="editWorkType">
              <option value="">ì„ íƒ</option>
              <option value="full_time">ì •ê·œì§</option>
              <option value="part_time">íŒŒíŠ¸íƒ€ì„</option>
              <option value="contract">ê³„ì•½ì§</option>
              <option value="daily">ì¼ìš©ì§</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <!-- employees.work_start_time ì»¬ëŸ¼ -->
          <div class="form-group"><label>ê·¼ë¬´ ì‹œì‘ ì‹œê°„</label><input type="time" id="editWorkStart"></div>
          <!-- employees.work_end_time ì»¬ëŸ¼ -->
          <div class="form-group"><label>ê·¼ë¬´ ì¢…ë£Œ ì‹œê°„</label><input type="time" id="editWorkEnd"></div>
        </div>
        <div class="form-row">
          <!-- employees.break_time_minutes ì»¬ëŸ¼ (ë¶„ ë‹¨ìœ„) -->
          <div class="form-group"><label>íœ´ê²Œ ì‹œê°„ (ë¶„)</label><input type="number" id="editBreakTime" placeholder="ì˜ˆ: 60" min="0" max="480"></div>
          <!-- employees.probation_months ì»¬ëŸ¼ (ê°œì›” ë‹¨ìœ„) -->
          <div class="form-group"><label>ìˆ˜ìŠµ ê¸°ê°„ (ê°œì›”)</label><input type="number" id="editProbation" placeholder="ì˜ˆ: 3" min="0" max="12"></div>
        </div>
      </div>

      <!-- ===== [ëª¨ë‹¬ ì„¹ì…˜3] ì¸ì  ì‚¬í•­ ===== -->
      <!-- ì´ë¦„ / ì „í™”ë²ˆí˜¸ / ì´ë©”ì¼ -->
      <div class="form-section">
        <div class="form-section-title">ì¸ì  ì‚¬í•­</div>
        <div class="form-row">
          <div class="form-group"><label>ì´ë¦„</label><input type="text" id="editName"></div>
          <div class="form-group"><label>ì „í™”ë²ˆí˜¸</label><input type="tel" id="editPhone" placeholder="010-0000-0000"></div>
        </div>
        <div class="form-row full">
          <div class="form-group"><label>ì´ë©”ì¼</label><input type="email" id="editEmail"></div>
        </div>
      </div>

      <!-- ===== [ëª¨ë‹¬ ì„¹ì…˜4] ê¸‰ì—¬ ì •ë³´ ===== -->
      <!-- ê¸‰ì—¬ìœ í˜• / ê¸°ë³¸ê¸‰ -->
      <div class="form-section">
        <div class="form-section-title">ê¸‰ì—¬ ì •ë³´</div>
        <div class="form-row">
          <div class="form-group">
            <label>ê¸‰ì—¬ ìœ í˜•</label>
            <!-- employees.salary_type ì»¬ëŸ¼ -->
            <select id="editSalaryType">
              <option value="hourly">ì‹œê¸‰ì œ</option>
              <option value="daily">ì¼ê¸‰ì œ</option>
              <option value="monthly">ì›”ê¸‰ì œ</option>
              <option value="annual">ì—°ë´‰ì œ</option>
            </select>
          </div>
          <!-- employees.base_salary ì»¬ëŸ¼ (ì› ë‹¨ìœ„) -->
          <div class="form-group"><label>ê¸°ë³¸ê¸‰ (ì›)</label><input type="number" id="editBaseSalary" min="0"></div>
        </div>
      </div>

      <!-- ===== [ëª¨ë‹¬ ì„¹ì…˜5] ê³„ì¢Œ ì •ë³´ ===== -->
      <!-- ì€í–‰ëª… / ê³„ì¢Œë²ˆí˜¸ -->
      <div class="form-section">
        <div class="form-section-title">ê³„ì¢Œ ì •ë³´</div>
        <div class="form-row">
          <div class="form-group">
            <label>ì€í–‰ëª…</label>
            <select id="editBankName">
              <option value="">ì„ íƒ</option>
              <option>KBêµ­ë¯¼ì€í–‰</option><option>ì‹ í•œì€í–‰</option><option>ìš°ë¦¬ì€í–‰</option>
              <option>í•˜ë‚˜ì€í–‰</option><option>IBKê¸°ì—…ì€í–‰</option><option>NHë†í˜‘ì€í–‰</option>
              <option>ì¹´ì¹´ì˜¤ë±…í¬</option><option>í† ìŠ¤ë±…í¬</option><option>ì¼€ì´ë±…í¬</option>
              <option>SCì œì¼ì€í–‰</option><option>ì”¨í‹°ì€í–‰</option><option>ìš°ì²´êµ­</option>
              <option>ìƒˆë§ˆì„ê¸ˆê³ </option><option>ì‹ í˜‘</option><option>ìˆ˜í˜‘ì€í–‰</option>
              <option>ëŒ€êµ¬ì€í–‰</option><option>ë¶€ì‚°ì€í–‰</option><option>ê´‘ì£¼ì€í–‰</option>
              <option>ì „ë¶ì€í–‰</option><option>ê²½ë‚¨ì€í–‰</option><option>ì œì£¼ì€í–‰</option>
            </select>
          </div>
          <div class="form-group"><label>ê³„ì¢Œë²ˆí˜¸</label><input type="text" id="editAccountNumber" placeholder="ìˆ«ìë§Œ ì…ë ¥"></div>
        </div>
      </div>

    </div><!-- /modal-body -->

    <!-- ì €ì¥ ê²°ê³¼ ë©”ì‹œì§€ ì˜ì—­ -->
    <div id="saveResult" class="save-result"></div>

    <!-- ëª¨ë‹¬ í•˜ë‹¨ ë²„íŠ¼ -->
    <div class="modal-footer">
      <button class="btn-cancel" onclick="closeEditModal()">ì·¨ì†Œ</button>
      <!-- ì €ì¥ ì¤‘ì—ëŠ” disabled ì²˜ë¦¬, ì„±ê³µ í›„ 1.5ì´ˆ ë’¤ ìë™ ë‹«í˜ -->
      <button class="btn-save" id="saveBtn" onclick="saveEmployee()">ğŸ’¾ ì €ì¥</button>
    </div>

  </div><!-- /modal -->
</div><!-- /modal-overlay -->


<script>
/* ============================================================
   ì „ì—­ ë³€ìˆ˜
   authToken    : localStorage ì˜ JWT í† í°
   employeeData : API ë¡œ ë¶ˆëŸ¬ì˜¨ ì§ì› ìƒì„¸ ê°ì²´
   businessList : ì‚¬ì—…ì¥ ëª©ë¡ (ë“œë¡­ë‹¤ìš´Â·ì´ë¦„ ë³€í™˜ìš©)
============================================================ */
var authToken    = null;
var employeeData = null;
var businessList = [];

/* ============================================================
   í˜ì´ì§€ ì§„ì… ì´ˆê¸°í™”
   - URL ?id= íŒŒë¼ë¯¸í„°ë¡œ ì§ì› ID ì¶”ì¶œ
   - ì§ì› ìƒì„¸ + ì‚¬ì—…ì¥ ëª©ë¡ ë³‘ë ¬ ë¡œë“œ
============================================================ */
window.addEventListener('DOMContentLoaded', async function() {
  authToken = localStorage.getItem('authToken');
  if (!authToken) { window.location.href = '/login.html'; return; }

  var p  = new URLSearchParams(window.location.search);
  var id = p.get('id');
  if (!id) { window.location.href = '/employees.html'; return; }

  /* ë‘ API ë™ì‹œ í˜¸ì¶œ (ì†ë„ ìµœì í™”) */
  await Promise.all([
    loadEmployeeDetail(id),
    loadBusinessList()
  ]);
});

/* ============================================================
   ì‚¬ì—…ì¥ ëª©ë¡ ë¡œë“œ
   businesses-list API â†’ editBusiness ë“œë¡­ë‹¤ìš´ì— ì˜µì…˜ ì¶”ê°€
   + businessList ì „ì—­ ë³€ìˆ˜ ì €ì¥ (getBizName ì—ì„œ ì‚¬ìš©)
============================================================ */
async function loadBusinessList() {
  try {
    var r   = await fetch('/.netlify/functions/businesses-list',
                         { headers: { 'Authorization': 'Bearer ' + authToken } });
    var res = await r.json();
    if (res.success && res.businesses) {
      businessList = res.businesses;
      var sel = document.getElementById('editBusiness');
      res.businesses.forEach(function(b) {
        var opt       = document.createElement('option');
        opt.value     = b.id;
        opt.textContent = b.name + (b.is_headquarters ? ' (ë³¸ì )' : '');
        sel.appendChild(opt);
      });
    }
  } catch(e) {
    console.error('ì‚¬ì—…ì¥ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', e);
  }
}

/* ============================================================
   ì§ì› ìƒì„¸ ë¡œë“œ
   employee-detail API â†’ employeeData ì €ì¥ â†’ renderDetail()
============================================================ */
async function loadEmployeeDetail(id) {
  try {
    var r    = await fetch('/.netlify/functions/employee-detail?id=' + id,
                          { headers: { 'Authorization': 'Bearer ' + authToken } });
    var data = await r.json();
    if (!data.success) throw new Error(data.error);

    employeeData = data.data;
    renderDetail();

    document.getElementById('loadingState').style.display = 'none';
    document.getElementById('mainContent').style.display  = 'block';
  } catch(e) {
    alert('ì§ì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ' + e.message);
    window.location.href = '/employees.html';
  }
}

/* ============================================================
   í™”ë©´ ë Œë”ë§ (employeeData â†’ ëª¨ë“  DOM ë°˜ì˜)
   ì €ì¥ ì„±ê³µ í›„ì—ë„ ì¬í˜¸ì¶œë˜ì–´ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ì¦‰ì‹œ ë°˜ì˜
============================================================ */
function renderDetail() {
  var d    = employeeData;
  var name = d.name || 'ì´ë¦„ ì—†ìŒ';

  /* ë¸Œë¼ìš°ì € íƒ­ + ë¹µë¶€ìŠ¤ëŸ¬ê¸° */
  document.title = name + ' - StaffManager';
  document.getElementById('breadcrumbName').textContent = name;

  /* ì•„ë°”íƒ€ (ì´ë¦„ ì²« ê¸€ì) */
  document.getElementById('avatar').textContent = name.charAt(0);

  /* í”„ë¡œí•„ í—¤ë” */
  document.getElementById('empName').textContent     = name;
  document.getElementById('empDept').textContent     = d.department ? 'ğŸ¢ ' + d.department : '';
  document.getElementById('empPosition').textContent = d.position   ? 'ğŸ“‹ ' + d.position   : '';

  /* ì†Œì† ì‚¬ì—…ì¥ëª… (ID â†’ ì´ë¦„ ë³€í™˜) */
  var bizName = getBizName(d.businessId);
  document.getElementById('empBiz').textContent = bizName ? 'ğŸ“ ' + bizName : '';
  setText('infoBusiness', bizName || 'ë¯¸ë°°ì •');

  /* ì¬ì§ ìƒíƒœ ë±ƒì§€ */
  var se        = document.getElementById('empStatus');
  var statusMap = {
    active:   ['ì¬ì§ ì¤‘', 'status-active'],
    on_leave: ['íœ´ì§',    'status-on_leave'],
    resigned: ['í‡´ì‚¬',    'status-resigned']
  };
  var st = statusMap[d.status] || [d.status, 'status-active'];
  se.textContent = st[0];
  se.className   = 'status-badge ' + st[1];

  /* â”€ íƒ­1: ì¸ì  ì‚¬í•­ â”€ */
  setText('infoName',      name);
  setText('infoEmail',     d.email);
  setText('infoPhone',     d.phone);
  setText('infoBirth',     fmtDate(d.birthDate));
  setText('infoAddress',   d.address);
  setText('infoEmpNumber', d.employeeNumber);

  /* â”€ íƒ­1: ì¡°ì§ ì •ë³´ â”€ */
  setText('infoDept',     d.department);
  setText('infoPosition', d.position);
  setText('infoJobTitle', d.jobTitle);
  setText('infoHireDate', fmtDate(d.hireDate));
  setText('infoCreated',  fmtDate(d.createdAt));

  /* ì¬ì§ ê¸°ê°„ ê³„ì‚° */
  if (d.hireDate) {
    var h      = new Date(d.hireDate);
    var now    = new Date();
    var diff   = now - h;
    var years  = Math.floor(diff / (365.25 * 864e5));
    var months = Math.floor((diff % (365.25 * 864e5)) / (30.44 * 864e5));
    setText('infoTenure', (years > 0 ? years + 'ë…„ ' : '') + months + 'ê°œì›”');
  }

  /* â”€ íƒ­2: ê·¼ë¬´ ì¡°ê±´ â”€ */
  var workTypeMap = { full_time: 'ì •ê·œì§', part_time: 'íŒŒíŠ¸íƒ€ì„', contract: 'ê³„ì•½ì§', daily: 'ì¼ìš©ì§' };
  setText('infoWorkType', workTypeMap[d.workType] || d.workType);

  if (d.workStartTime && d.workEndTime) {
    setText('infoWorkHours', d.workStartTime + ' ~ ' + d.workEndTime);
  }
  setText('infoBreakTime',     d.breakTimeMinutes ? d.breakTimeMinutes + 'ë¶„' : null);
  setText('infoWeeklyHoliday', d.weeklyHoliday);
  setText('infoProbation',     d.probationMonths ? d.probationMonths + 'ê°œì›”' : 'ì—†ìŒ');
  setText('infoContractStart', fmtDate(d.contractStartDate));
  setText('infoContractEnd',   fmtDate(d.contractEndDate) || 'ë¬´ê¸°í•œ');

  /* â”€ íƒ­3: ê¸‰ì—¬ ì •ë³´ â”€ */
  var salaryTypeMap = { monthly: 'ì›”ê¸‰ì œ', hourly: 'ì‹œê¸‰ì œ', daily: 'ì¼ê¸‰ì œ', annual: 'ì—°ë´‰ì œ' };
  setText('infoSalaryType', salaryTypeMap[d.salaryType] || d.salaryType);

  // ê¸‰ì—¬ ìœ í˜•ì— ë”°ë¼ í•´ë‹¹ í–‰ë§Œ í‘œì‹œ, ë‚˜ë¨¸ì§€ ìˆ¨ê¹€
  var isHourlyOrDaily = (d.salaryType === 'hourly' || d.salaryType === 'daily');
  var isMonthly       = (d.salaryType === 'monthly');
  var isAnnual        = (d.salaryType === 'annual');

  document.getElementById('rowBaseSalary').style.display  = isHourlyOrDaily ? '' : 'none';
  document.getElementById('rowMonthlyWage').style.display = isMonthly        ? '' : 'none';
  document.getElementById('rowAnnualSalary').style.display = isAnnual         ? '' : 'none';

  setText('infoBaseSalary',   fmtCur(d.baseSalary));
  setText('infoMonthlyWage',  fmtCur(d.monthlyWage));
  setText('infoAnnualSalary', fmtCur(d.annualSalary));
  setText('infoBankName',     d.bankName);
  setText('infoAccountNumber', d.accountNumber ? maskAcc(d.accountNumber) : null);

  /* â”€ íƒ­4: ê³„ì•½ ì´ë ¥ â”€ */
  renderContracts(d.contracts || []);
}

/* ============================================================
   ëª¨ë‹¬ ì—´ê¸° (openEditModal)
   í˜„ì¬ employeeData ê°’ì„ ëª¨ë‹¬ í¼ì— ìë™ ì±„ì›€
============================================================ */
function openEditModal() {
  var d = employeeData;

  /* â”€ ì„¹ì…˜1: ì¡°ì§ ë°°ì¹˜ â”€ */
  document.getElementById('editBusiness').value  = d.businessId || '';
  document.getElementById('editStatus').value    = d.status     || 'active';
  document.getElementById('editDept').value      = d.department || '';
  document.getElementById('editPosition').value  = d.position   || '';
  document.getElementById('editJobTitle').value  = d.jobTitle   || '';
  document.getElementById('editHireDate').value  = d.hireDate ? d.hireDate.split('T')[0] : '';

  /* â”€ ì„¹ì…˜2: ê·¼ë¬´ ì¡°ê±´ (â˜…â˜…â˜… ì´ë²ˆ ìˆ˜ì •ìœ¼ë¡œ ìƒˆë¡œ ì¶”ê°€ëœ í•„ë“œë“¤ â˜…â˜…â˜…) â”€ */
  document.getElementById('editWorkType').value     = d.workType      || '';
  document.getElementById('editWorkStart').value    = d.workStartTime || '';
  document.getElementById('editWorkEnd').value      = d.workEndTime   || '';
  document.getElementById('editBreakTime').value    = d.breakTimeMinutes || '';
  document.getElementById('editProbation').value    = d.probationMonths  || '';

  /* â”€ ì„¹ì…˜3: ì¸ì  ì‚¬í•­ â”€ */
  document.getElementById('editName').value  = d.name  || '';
  document.getElementById('editPhone').value = d.phone || '';
  document.getElementById('editEmail').value = d.email || '';

  /* â”€ ì„¹ì…˜4: ê¸‰ì—¬ ì •ë³´ â”€ */
  document.getElementById('editSalaryType').value = d.salaryType || 'hourly';
  document.getElementById('editBaseSalary').value = d.baseSalary || '';

  /* â”€ ì„¹ì…˜5: ê³„ì¢Œ ì •ë³´ â”€ */
  document.getElementById('editBankName').value      = d.bankName      || '';
  document.getElementById('editAccountNumber').value = d.accountNumber || '';

  /* ì´ì „ ê²°ê³¼ ë©”ì‹œì§€ ì´ˆê¸°í™” */
  document.getElementById('saveResult').className   = 'save-result';
  document.getElementById('saveResult').textContent = '';
  document.getElementById('saveBtn').disabled       = false;
  document.getElementById('saveBtn').textContent    = 'ğŸ’¾ ì €ì¥';

  document.getElementById('editModal').classList.add('show');
}

/* ëª¨ë‹¬ ë‹«ê¸° */
function closeEditModal() {
  document.getElementById('editModal').classList.remove('show');
}

/* ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸° */
function closeModalOnBg(e) {
  if (e.target === document.getElementById('editModal')) closeEditModal();
}

/* ============================================================
   ì €ì¥ ì²˜ë¦¬ (saveEmployee)
   employees-update API (PUT) í˜¸ì¶œ
   ì„±ê³µ: employeeData ê°±ì‹  â†’ renderDetail() â†’ 1.5ì´ˆ í›„ ë‹«í˜
   ì‹¤íŒ¨: ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ, ëª¨ë‹¬ ìœ ì§€
============================================================ */
async function saveEmployee() {
  var btn      = document.getElementById('saveBtn');
  var resultEl = document.getElementById('saveResult');

  btn.disabled    = true;
  btn.textContent = 'ì €ì¥ ì¤‘...';
  resultEl.className = 'save-result';  /* ì´ì „ ë©”ì‹œì§€ ìˆ¨ê¹€ */

  /* API ì „ì†¡ ë°ì´í„° êµ¬ì„± */
  var payload = {
    employeeId: employeeData.id,

    /* ì„¹ì…˜1: ì¡°ì§ ë°°ì¹˜ */
    businessId:  document.getElementById('editBusiness').value || null,
    status:      document.getElementById('editStatus').value,
    department:  document.getElementById('editDept').value.trim(),
    position:    document.getElementById('editPosition').value.trim(),
    jobTitle:    document.getElementById('editJobTitle').value.trim(),
    hireDate:    document.getElementById('editHireDate').value || null,

    /* ì„¹ì…˜2: ê·¼ë¬´ ì¡°ê±´ (â˜…â˜…â˜… ì‹ ê·œ í•„ë“œ â˜…â˜…â˜…) */
    workType:         document.getElementById('editWorkType').value     || null,
    workStartTime:    document.getElementById('editWorkStart').value    || null,
    workEndTime:      document.getElementById('editWorkEnd').value      || null,
    breakTimeMinutes: parseInt(document.getElementById('editBreakTime').value) || null,
    probationMonths:  parseInt(document.getElementById('editProbation').value) || null,

    /* ì„¹ì…˜3: ì¸ì  ì‚¬í•­ */
    name:  document.getElementById('editName').value.trim(),
    phone: document.getElementById('editPhone').value.trim(),
    email: document.getElementById('editEmail').value.trim(),

    /* ì„¹ì…˜4: ê¸‰ì—¬ ì •ë³´ */
    salaryType: document.getElementById('editSalaryType').value,
    baseSalary: parseFloat(document.getElementById('editBaseSalary').value) || null,
    // ê¸‰ì—¬ ìœ í˜• ë³€ê²½ ì‹œ ì´ì „ ìœ í˜• ê¸ˆì•¡ DBì—ì„œ ì´ˆê¸°í™” (ì”ì¡´ ë°ì´í„° ë°©ì§€)
    monthlyWage:  document.getElementById('editSalaryType').value === 'monthly'
                  ? (parseFloat(document.getElementById('editBaseSalary').value) || null)
                  : null,
    annualSalary: document.getElementById('editSalaryType').value === 'annual'
                  ? (parseFloat(document.getElementById('editBaseSalary').value) || null)
                  : null,

    /* ì„¹ì…˜5: ê³„ì¢Œ ì •ë³´ */
    bankName:      document.getElementById('editBankName').value,
    accountNumber: document.getElementById('editAccountNumber').value.trim()
  };

  try {
    var r = await fetch('/.netlify/functions/employees-update', {
      method:  'PUT',
      headers: { 'Authorization': 'Bearer ' + authToken, 'Content-Type': 'application/json' },
      body:    JSON.stringify(payload)
    });
    var res = await r.json();
    if (!res.success) throw new Error(res.error || res.message || 'ì €ì¥ ì‹¤íŒ¨');

    /* ì„±ê³µ: employeeData ì¦‰ì‹œ ê°±ì‹  (API ì¬ì¡°íšŒ ì—†ì´) */
    Object.assign(employeeData, {
      businessId:       payload.businessId,
      status:           payload.status,
      department:       payload.department,
      position:         payload.position,
      jobTitle:         payload.jobTitle,
      hireDate:         payload.hireDate,
      workType:         payload.workType,         /* â˜… ì‹ ê·œ */
      workStartTime:    payload.workStartTime,    /* â˜… ì‹ ê·œ */
      workEndTime:      payload.workEndTime,      /* â˜… ì‹ ê·œ */
      breakTimeMinutes: payload.breakTimeMinutes, /* â˜… ì‹ ê·œ */
      probationMonths:  payload.probationMonths,  /* â˜… ì‹ ê·œ */
      name:             payload.name,
      phone:            payload.phone,
      email:            payload.email,
      salaryType:       payload.salaryType,
      baseSalary:       payload.baseSalary,
      bankName:         payload.bankName,
      accountNumber:    payload.accountNumber
    });

    renderDetail();  /* í™”ë©´ ì¦‰ì‹œ ì¬ë Œë”ë§ */

    resultEl.textContent = 'âœ… ì €ì¥ ì™„ë£Œ!';
    resultEl.className   = 'save-result success';
    btn.textContent      = 'ğŸ’¾ ì €ì¥';
    btn.disabled         = false;
    setTimeout(closeEditModal, 1500);  /* 1.5ì´ˆ í›„ ìë™ ë‹«í˜ */

  } catch(e) {
    resultEl.textContent = 'âŒ ' + e.message;
    resultEl.className   = 'save-result error';
    btn.textContent      = 'ğŸ’¾ ì €ì¥';
    btn.disabled         = false;
  }
}

/* ============================================================
   íƒ­ ì „í™˜ (switchTab)
============================================================ */
function switchTab(t) {
  document.querySelectorAll('.tab').forEach(function(e) { e.classList.remove('active'); });
  document.querySelectorAll('.tab-content').forEach(function(e) { e.classList.remove('active'); });
  document.querySelector('.tab[data-tab="' + t + '"]').classList.add('active');
  document.getElementById('tab-' + t).classList.add('active');
}

/* ============================================================
   ê³„ì•½ ì´ë ¥ ë Œë”ë§ (íƒ­4)
============================================================ */
function renderContracts(cs) {
  var l = document.getElementById('contractList');
  if (!cs.length) return;  /* ì—†ìœ¼ë©´ ê¸°ë³¸ ë©”ì‹œì§€ ìœ ì§€ */

  var typeMap   = { standard_labor: 'í‘œì¤€ ê·¼ë¡œê³„ì•½ì„œ', part_time: 'ë‹¨ì‹œê°„ ê·¼ë¡œê³„ì•½ì„œ', daily: 'ì¼ìš© ê·¼ë¡œê³„ì•½ì„œ' };
  var statusMap = {
    completed: ['ì„œëª… ì™„ë£Œ', 'contract-signed'],
    sent:      ['ë°œì†¡ë¨',    'contract-sent'],
    pending:   ['ëŒ€ê¸° ì¤‘',   'contract-pending'],
    viewed:    ['ì—´ëŒí•¨',    'contract-sent']
  };

  l.innerHTML = cs.map(function(c) {
    var s = statusMap[c.status] || [c.status, 'contract-pending'];
    return '<li class="contract-item">'
      + '<div>'
      + '<div class="contract-type">' + (typeMap[c.type] || c.type || 'ê·¼ë¡œê³„ì•½ì„œ') + '</div>'
      + '<div class="contract-date">ìƒì„±: ' + fmtDate(c.createdAt)
      + (c.signedAt ? ' Â· ì„œëª…: ' + fmtDate(c.signedAt) : '') + '</div>'
      + '</div>'
      + '<span class="contract-status ' + s[1] + '">' + s[0] + '</span>'
      + '</li>';
  }).join('');
}

/* ============================================================
   ìœ í‹¸ í•¨ìˆ˜
============================================================ */

/** businessId â†’ ì‚¬ì—…ì¥ ì´ë¦„ (businessList ë°°ì—´ ê²€ìƒ‰) */
function getBizName(bizId) {
  if (!bizId) return null;
  var b = businessList.find(function(x) { return x.id === bizId; });
  return b ? b.name : null;
}

/** DOM í…ìŠ¤íŠ¸ ì„¤ì • (ê°’ ì—†ìœ¼ë©´ '-') */
function setText(id, v) {
  var e = document.getElementById(id);
  if (e) e.textContent = v || '-';
}

/** ë‚ ì§œ í¬ë§· (ISO â†’ í•œêµ­ì‹) */
function fmtDate(s) {
  if (!s) return null;
  var d = new Date(s);
  if (isNaN(d)) return s;
  return d.toLocaleDateString('ko-KR', { year: 'numeric', month: '2-digit', day: '2-digit' });
}

/** ê¸ˆì•¡ í¬ë§· (â‚© + ì²œë‹¨ìœ„ ì½¤ë§ˆ) */
function fmtCur(a) {
  if (!a && a !== 0) return null;
  return '\u20A9' + Number(a).toLocaleString('ko-KR');
}

/** ê³„ì¢Œë²ˆí˜¸ ë§ˆìŠ¤í‚¹ (ì•3 + **** + ë’¤3) */
function maskAcc(a) {
  if (!a || a.length < 5) return a;
  return a.slice(0, 3) + '****' + a.slice(-3);
}
</script>
</body>
</html>
